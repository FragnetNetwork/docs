"use strict";(globalThis.webpackChunkfragdocs=globalThis.webpackChunkfragdocs||[]).push([[3792],{28453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},32633(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"control-panel/api/server/websocket","title":"Accessing the console","description":"The WebSocket endpoint provides real-time access to the console of a specific server. This allows you to receive live updates and send commands directly to the server console.","source":"@site/docs/control-panel/api/server/websocket.md","sourceDirName":"control-panel/api/server","slug":"/control-panel/api/server/websocket","permalink":"/control-panel/api/server/websocket","draft":false,"unlisted":false,"editUrl":"https://github.com/FragnetNetwork/docs/tree/main/docs/control-panel/api/server/websocket.md","tags":[],"version":"current","frontMatter":{"title":"Accessing the console","keywords":["api","server","console","websocket","real-time","console access"]},"sidebar":"docs","previous":{"title":"Retrieving server resources","permalink":"/control-panel/api/server/retrieving-server-resources"},"next":{"title":"Send a console command","permalink":"/control-panel/api/server/sending-a-command"}}');var r=s(74848),t=s(28453);const o={title:"Accessing the console",keywords:["api","server","console","websocket","real-time","console access"]},l="WebSocket Console Details",c={},a=[{value:"Endpoint",id:"endpoint",level:2},{value:"Headers",id:"headers",level:2},{value:"Description",id:"description",level:2},{value:"Example Request",id:"example-request",level:3},{value:"Example Response",id:"example-response",level:3},{value:"How to Connect",id:"how-to-connect",level:2},{value:"Example",id:"example",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Actions",id:"actions",level:2},{value:"Things You Can Send",id:"things-you-can-send",level:3},{value:"Responses",id:"responses",level:2},{value:"Things You&#39;ll Receive",id:"things-youll-receive",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"websocket-console-details",children:"WebSocket Console Details"})}),"\n",(0,r.jsx)(n.p,{children:"The WebSocket endpoint provides real-time access to the console of a specific server. This allows you to receive live updates and send commands directly to the server console."}),"\n",(0,r.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"GET /api/client/servers/{server}/websocket"})}),"\n",(0,r.jsx)(n.h2,{id:"headers",children:"Headers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Accept"}),": ",(0,r.jsx)(n.code,{children:"application/json"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Content-Type"}),": ",(0,r.jsx)(n.code,{children:"application/json"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authorization"}),": ",(0,r.jsx)(n.code,{children:"Bearer your_api_key"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"This endpoint generates credentials to establish a WebSocket connection with your Fragify server."}),"\n",(0,r.jsx)(n.h3,{id:"example-request",children:"Example Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://panel.fragnet.net/api/client/servers/{server}/websocket"\n    -H "Authorization: Bearer your_api_key"\n    -H "Accept: application/json"\n    -H "Content-Type: application/json"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"example-response",children:"Example Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImp0aSI6Ij...",\n    "socket": "wss://panel.fragnet.net:8080/api/servers/xxxxxxxxx/ws"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"how-to-connect",children:"How to Connect"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Make a request to the endpoint to generate the WebSocket credentials."}),"\n",(0,r.jsx)(n.li,{children:"Connect to the WebSocket address provided in the response."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const ws = new WebSocket('wss://panel.fragnet.net:8080/api/servers/xxxxxxxxx/ws');\n\nws.onopen = () => {\n  ws.send(JSON.stringify({\n    event: 'auth',\n    args: ['eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImp0aSI6Ij...']\n  }));\n};\n\nws.onmessage = (event) => {\n  const message = JSON.parse(event.data);\n  console.log('Message from server:', message);\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(n.p,{children:"Send the token to the WebSocket as follows:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "auth",\n    "args": ["<token>"]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Tokens last about 10-15 minutes. The WebSocket will notify you when you need to send a new token with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'{"event":"token expiring"}'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'{"event":"token expired"}'})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,r.jsx)(n.h3,{id:"things-you-can-send",children:"Things You Can Send"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Authenticate with WebSocket"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "auth",\n    "args": ["<token>"]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Stats"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "send stats",\n    "args": [null]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Logs"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "send logs",\n    "args": [null]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Send Power Action"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "set state",\n    "args": ["<power-action>"]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Send Command"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "send command",\n    "args": ["<command>"]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"responses",children:"Responses"}),"\n",(0,r.jsx)(n.h3,{id:"things-youll-receive",children:"Things You'll Receive"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Successful Authentication"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "auth success"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server Status Updates"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "status",\n    "args": ["offline"]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Console Output Logs"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "console output",\n    "args": ["[14:07:12] [Query Listener #1/INFO]: Query running on 0.0.0.0:25565"]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Server Stats"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "stats",\n    "args": ["{"memory_bytes":526626816,"memory_limit_bytes":588800000,"cpu_absolute":588.815,"network":{"rx_bytes":1126,"tx_bytes":1126},"state":"stopping","disk_bytes":128118626}"]\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Token Expiring Notification"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "token expiring"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Token Expired Notification"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "token expired"\n}\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);